!function(){"use strict";!function(){const s={randomVec(t){const e=2*Math.PI*Math.random(),i=.6*Math.random()-.3;return s.scale([Math.sin(e)/2,i],t)},scale(s,t){return[s[0]*t,s[1]]}};class t{constructor(t,e){this.pos=t,this.posX=t[0],this.posY=t[1],this.vel=s.randomVec(5),this.velX=this.vel[0],this.radius=10,this.name=e,this.hunger=!0,this.health=60,this.size=1,this.status="alive",this.healthClock()}resetHunger(){this.hunger||setInterval((()=>{this.hunger=!0}),3e4)}healthClock(){!0===this.hunger&&setInterval((()=>{this.health--}),1e3)}draw(s){const t=new Image,e=new Image;t.src="src/image/l-clownFish.png",e.src="src/image/r-clownFish.png";const i=new Image;i.src="src/image/deadFish.png",this.health>0&&(this.velX>0&&1===this.size&&s.drawImage(e,this.posX,this.posY,60,40),this.velX<0&&1===this.size&&s.drawImage(t,this.posX,this.posY,60,40),this.velX>0&&2===this.size&&s.drawImage(e,this.posX,this.posY,80,60),this.velX<0&&2===this.size&&s.drawImage(t,this.posX,this.posY,80,60),this.velX>0&&3===this.size&&s.drawImage(e,this.posX,this.posY,120,100),this.velX<0&&3===this.size&&s.drawImage(t,this.posX,this.posY,100,120)),this.health<=0&&(this.status="dead",s.drawImage(i,this.posX,this.posY,80,40))}chase(s){let t=s[0],e=s[1],i=t-this.posX,h=e-this.posY,o=Math.sqrt(i**2+h**2),a=i/o,r=h/o;this.velX=a,this.posX+=a,this.posY+=r}move(){this.health>0?(this.posX+=this.velX,this.posY+=this.vel[1],1===this.size&&(this.posX-5<0&&this.velX<0&&(this.velX=-this.velX),this.posX+40>1400&&this.velX>0&&(this.velX=-this.velX),this.posY<0&&this.vel[1]<0&&(this.vel[1]=-this.vel[1]),this.posY+70>900&&this.vel[1]>0&&(this.vel[1]=-this.vel[1])),2===this.size&&(this.posX<0&&this.velX<0&&(this.velX=-this.velX),this.posX+70>1400&&this.velX>0&&(this.velX=-this.velX),this.posY-5<0&&this.vel[1]<0&&(this.vel[1]=-this.vel[1]),this.posY+80>900&&this.vel[1]>0&&(this.vel[1]=-this.vel[1])),3===this.size&&(this.posX<0&&this.velX<0&&(this.velX=-this.velX),this.posX+90>1400&&this.velX>0&&(this.velX=-this.velX),this.posY-5<0&&this.vel[1]<0&&(this.vel[1]=-this.vel[1]),this.posY+110>900&&this.vel[1]>0&&(this.vel[1]=-this.vel[1]))):this.posY>0&&this.posY<=15?this.posY++:this.posY--}}class e{constructor(s){this.posX=0,this.posY=500,this.zone=s}draw(s){1===this.zone&&(this.posX=120),2===this.zone&&(this.posX=450),3===this.zone&&(this.posX=800),4===this.zone&&(this.posX=1180);const t=new Image;t.src="src/image/palmtree.png",s.drawImage(t,this.posX,this.posY,120,400)}}class i{constructor(s){this.posX=s[0],this.posY=s[1]}draw(s){const t=new Image;t.src="src/image/bubble.png";const e=new Image;e.src="src/image/bubble2.png",this.posY<75&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=75&&this.posY<125&&s.drawImage(e,this.posX,this.posY,40,70),this.posY>=125&&this.posY<200&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=200&&this.posY<275&&s.drawImage(e,this.posX,this.posY,40,70),this.posY>=275&&this.posY<325&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=325&&this.posY<400&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=400&&s.drawImage(t,this.posX,this.posY,40,70)}move(){this.posY-=1.5}}class h{constructor(s){this.pos=s,this.dimX=5,this.dimY=5,this.posX=s[0],this.posY=s[1],this.life=10,this.collided=!1}draw(s){const t=new Image;t.src="src/image/worm.png",this.life>0&&s.drawImage(t,this.posX,this.posY,30,60)}}function o(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}class a{constructor(){this.fish={},this.dec=[],this.bubbles=[],this.food=[],this.canvas=document.getElementById("canvas"),this.body=document.querySelector("body"),this.grid=document.querySelector(".grid-container"),this.item1=document.querySelector(".grid-item1"),this.item2=document.querySelector(".grid-item2"),this.item3=document.querySelector(".grid-item3"),this.item4=document.querySelector(".grid-item4"),this.navbar=document.querySelector(".navbar"),this.destroy=this.destroy.bind(this),this.createFish=this.createFish.bind(this),this.createFood=this.createFood.bind(this),this.createDecoration=this.createDecoration.bind(this),this.directingNavbar=this.directingNavbar.bind(this),this.navbar=document.querySelector(".navbar"),this.navbar.addEventListener("click",this.directingNavbar)}directingNavbar(s){const t=s.target;"feed"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.createDecoration),this.canvas.removeEventListener("click",this.destroy),this.canvas.addEventListener("click",this.createFood),this.body.style.cursor="url('../src/image/c-fishFood.png'), auto"),"fish"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFood),this.canvas.removeEventListener("click",this.destroy),this.canvas.removeEventListener("click",this.createDecoration),this.body.style.cursor="url('../src/image/c-clownFish.png'), auto",this.canvas.addEventListener("click",this.createFish)),"decorate"===t.classList.value?(this.canvas.removeEventListener("click",this.createFood),this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.destroy),this.grid.style.display="flex",this.body.style.cursor="url('JavascriptProject/src/image/c-decoration.png'), auto",document.addEventListener("click",this.createDecoration)):this.grid.style.display="none","delete"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFood),this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.createDecoration),this.canvas.addEventListener("click",this.destroy),this.body.style.cursor="url('../src/image/c-delete.png'), auto"),"imgexit"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.createDecoration),this.canvas.removeEventListener("click",this.destroy),this.canvas.removeEventListener("click",this.createFood),this.body.style.cursor="pointer")}destroy(s){let t=s.clientX-200,e=s.clientY;console.log(t,e),Object.values(this.fish).forEach((s=>{"dead"===s.status&&t<s.posX+200&&t>s.posX-100&&e<s.posY+100&&e>s.posY&&delete this.fish[s.name]}))}createFood(s){let t=s.clientX-300,e=s.clientY-40;const i=new h([t,e]);this.food.length<a.MAX_FOOD&&this.food.push(i)}decreaseFoodLife(){this.food.forEach((s=>{s.life--,0===s.life&&this.food.shift()}))}createBubble(){this.addBubbles()}deleteBubble(){this.bubbles.length>=a.NUM_BUBBLES&&this.bubbles.shift()}addBubbles(){const s=new i(this.randomPosition());this.bubbles.push(s)}createDecoration(s){let t;"flex"===this.navbar.style.display&&(this.grid.style.marginLeft="118px"),s.target===this.item1&&(t=1),s.target===this.item2&&(t=2),s.target===this.item3&&(t=3),s.target===this.item4&&(t=4),this.dec.length<a.MAX_DEC&&this.addDecoration(t)}createFish(s){let t=[s.clientX-300,s.clientY-30];Object.keys(this.fish).length,!this.isOutOfBounds(t)&&Object.keys(this.fish).length<a.MAX_FISH&&this.addFish(t)}addFish(s){const e=new t(s,`fish${Object.values(this.fish).length}`);this.fish[`fish${Object.values(this.fish).length}`]=e}addDecoration(s){if(s){const t=new e(s),i=!0;this.dec.forEach((s=>{s.zone===t.zone&&(i=!1)})),i&&this.dec.push(t)}}randomPosition(){return[Math.floor(Math.random()*a.DIM_X),a.DIM_Y]}draw(s){s.clearRect(0,0,a.DIM_X,a.DIM_Y),this.dec.forEach((t=>{t.draw(s)})),this.food.forEach((t=>{t.draw(s)})),Object.values(this.fish).forEach((t=>{t.draw(s)}))}drawBubbles(s){this.bubbles.forEach((t=>{t.draw(s)}))}moveBubbles(){this.bubbles.forEach((s=>{s.move()}))}moveObjects(){Object.values(this.fish).forEach((t=>{t.health>0&&this.food.length>0&&t.hunger?this.food.forEach((e=>{t.hunger?(t.chase(e.pos),t.posX>=e.pos[0]-30&&t.posX<=e.pos[0]+30&&t.posY>=e.pos[1]-30&&t.posY<=e.pos[1]+30&&(t.size<3&&(t.size+=1),t.hunger=!1,t.health=60,t.resetHunger(),t.vel=s.randomVec(5),t.velX=t.vel[0],this.food.shift())):t.move()})):t.move()}))}isOutOfBounds(s){return s[0]<0||s[1]<0||s[0]>a.DIM_X||s[1]>a.DIM_Y}}o(a,"DIM_X",1400),o(a,"DIM_Y",900),o(a,"MAX_FISH",10),o(a,"MAX_DEC",4),o(a,"NUM_BUBBLES",4),o(a,"MAX_FOOD",1);class r{constructor(s){this.ctx=s,this.game=new a}start(){setInterval((()=>{this.game.moveObjects(),this.game.draw(this.ctx)}),50),setInterval((()=>{this.game.moveBubbles(),this.game.drawBubbles(this.ctx)}),50),setInterval((()=>{this.game.createBubble()}),1e4),setInterval((()=>{this.game.deleteBubble()}),1e4),setInterval((()=>{this.game.decreaseFoodLife()}),800)}}document.addEventListener("DOMContentLoaded",(()=>{const s=document.getElementById("canvas"),t=s.getContext("2d");s.height=900,s.width=1400;const e=document.querySelector(".burger"),i=document.querySelector(".exit"),h=document.querySelector(".navbar"),o=document.querySelector(".start"),a=document.querySelector(".titleScreen");e.addEventListener("mouseover",(function(){h.style.display="flex",e.style.display="none"})),window.addEventListener("keypress",(s=>{"e"===s.key&&(h.style.display="none",e.style.display="flex")})),o.addEventListener("click",(function(){a.style.display="none",h.style.display="flex"})),i.addEventListener("click",(function(){h.style.display="none",e.style.display="flex"})),new r(t).start()}))}()}();
//# sourceMappingURL=main.js.map