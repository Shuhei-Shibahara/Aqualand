!function(){"use strict";!function(){const s={randomVec(t){const e=2*Math.PI*Math.random(),i=.6*Math.random()-.3;return s.scale([Math.sin(e)/2,i],t)},scale(s,t){return[s[0]*t,s[1]]}};class t{constructor(t,e){this.pos=t,this.posX=t[0],this.posY=t[1],this.vel=s.randomVec(5),this.velX=this.vel[0],this.radius=10,this.name=e,this.hunger=!0,this.size=1}resetHunger(){setInterval((()=>{this.hunger=!0}),4e3)}draw(s){const t=new Image,e=new Image;t.style.id="nemo",e.style.id="nemo2",t.src="src/image/l-clownFish.png",e.src="src/image/r-clownFish.png",this.velX>0&&1===this.size&&s.drawImage(e,this.posX,this.posY,20,30),this.velX<0&&1===this.size&&s.drawImage(t,this.posX,this.posY,20,30),this.velX>0&&2===this.size&&s.drawImage(e,this.posX,this.posY,30,50),this.velX<0&&2===this.size&&s.drawImage(t,this.posX,this.posY,30,50),this.velX>0&&3===this.size&&s.drawImage(e,this.posX,this.posY,20,30),this.velX<0&&3===this.size&&s.drawImage(t,this.posX,this.posY,20,30)}chase(s){let t=s[0],e=s[1],i=t-this.posX,h=e-this.posY,o=Math.sqrt(i**2+h**2),a=i/o,c=h/o;this.velX=a,this.posX+=a,this.posY+=c}move(){this.posX+=this.velX,this.posY+=this.vel[1],this.posX-5<0&&this.velX<0&&(this.velX=-this.velX),this.posX+20>880&&this.velX>0&&(this.velX=-this.velX),this.posY-20<0&&this.vel[1]<0&&(this.vel[1]=-this.vel[1]),this.posY+20>500&&this.vel[1]>0&&(this.vel[1]=-this.vel[1])}}class e{constructor(s){this.posX=s[0],this.posY=250}draw(s){this.posX<237&&(this.posX=30),this.posX>=237&&this.posX<475&&(this.posX=250),this.posX>=475&&this.posX<712&&(this.posX=505),this.posX>=712&&this.posX<950&&(this.posX=752);const t=new Image;t.src="src/image/palmtree.png",s.drawImage(t,this.posX,this.posY,100,250)}}class i{constructor(s){this.posX=s[0],this.posY=s[1]}draw(s){const t=new Image;t.src="src/image/bubble.png";const e=new Image;e.src="src/image/bubble2.png",this.posY<75&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=75&&this.posY<125&&s.drawImage(e,this.posX,this.posY,40,70),this.posY>=125&&this.posY<200&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=200&&this.posY<275&&s.drawImage(e,this.posX,this.posY,40,70),this.posY>=275&&this.posY<325&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=325&&this.posY<400&&s.drawImage(t,this.posX,this.posY,40,70),this.posY>=400&&s.drawImage(t,this.posX,this.posY,40,70)}move(){this.posY-=1.5}}class h{constructor(s){this.pos=s,this.dimX=5,this.dimY=5,this.posX=s[0],this.posY=s[1],this.life=10,this.collided=!1}draw(s){const t=new Image;t.src="src/image/worm.png",this.life>0&&s.drawImage(t,this.posX,this.posY,30,60)}}function o(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}class a{constructor(){this.fish={},this.dec=[],this.bubbles=[],this.food=[],this.canvas=document.getElementById("canvas"),this.body=document.querySelector("body"),this.createFish=this.createFish.bind(this),this.createFood=this.createFood.bind(this),this.createDecoration=this.createDecoration.bind(this),this.directingNavbar=this.directingNavbar.bind(this),this.navbar=document.querySelector(".navbar"),this.navbar.addEventListener("click",this.directingNavbar)}directingNavbar(s){const t=s.target;"feed"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.createDecoration),this.canvas.addEventListener("click",this.createFood)),"fish"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFood),this.canvas.removeEventListener("click",this.createDecoration),this.body.style.cursor="url('../src/image/c-clownFish.png'), auto",this.canvas.addEventListener("click",this.createFish)),"decorate"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFood),this.canvas.removeEventListener("click",this.createFish),this.body.style.cursor="pointer",this.canvas.addEventListener("click",this.createDecoration)),"imgexit"===t.classList.value&&(this.canvas.removeEventListener("click",this.createFish),this.canvas.removeEventListener("click",this.createDecoration))}createFood(s){let t=[s.clientX,s.clientY-80];console.log(s.clientX);const e=new h(t);this.food.length<a.MAX_FOOD&&this.food.push(e)}decreaseFoodLife(){this.food.forEach((s=>{s.life--,0===s.life&&this.food.shift()}))}createBubble(){this.addBubbles()}deleteBubble(){this.bubbles.length>=a.NUM_BUBBLES&&this.bubbles.shift()}addBubbles(){const s=new i(this.randomPosition());this.bubbles.push(s)}createDecoration(s){let t=[s.clientX,s.clientY];!this.isOutOfBounds(t)&&this.dec.length<a.MAX_DEC&&this.addDecoration(t)}createFish(s){let t=[s.clientX-50,s.clientY-40];Object.keys(this.fish).length,!this.isOutOfBounds(t)&&Object.keys(this.fish).length<a.MAX_FISH&&this.addFish(t)}addFish(s){const e=new t(s,`fish${Object.values(this.fish).length}`);this.fish[`fish${Object.values(this.fish).length}`]=e}addDecoration(s){const t=new e(s);this.dec.push(t)}randomPosition(){return[Math.floor(Math.random()*(a.DIM_X-50)),a.DIM_Y]}draw(s){s.clearRect(0,0,a.DIM_X,a.DIM_Y),this.dec.forEach((t=>{t.draw(s)})),this.food.forEach((t=>{t.draw(s)})),Object.values(this.fish).forEach((t=>{t.draw(s)}))}drawBubbles(s){this.bubbles.forEach((t=>{t.draw(s)}))}moveBubbles(){this.bubbles.forEach((s=>{s.move()}))}moveObjects(){Object.values(this.fish).forEach((t=>{this.food.length>0&&t.hunger?this.food.forEach((e=>{t.hunger?(t.chase(e.pos),t.posX>=e.pos[0]-10&&t.posX<=e.pos[0]+10&&(t.size+=1,t.hunger=!1,t.resetHunger(),t.vel=s.randomVec(5),t.velX=t.vel[0],this.food.shift())):t.move()})):t.move()}))}isOutOfBounds(s){return s[0]<0||s[1]<0||s[0]>a.DIM_X||s[1]>a.DIM_Y}}o(a,"DIM_X",880),o(a,"DIM_Y",500),o(a,"MAX_FISH",10),o(a,"MAX_DEC",4),o(a,"NUM_BUBBLES",4),o(a,"MAX_FOOD",1);class c{constructor(s){this.ctx=s,this.game=new a}start(){setInterval((()=>{this.game.moveObjects(),this.game.draw(this.ctx)}),50),setInterval((()=>{this.game.moveBubbles(),this.game.drawBubbles(this.ctx)}),50),setInterval((()=>{this.game.createBubble(),this.game.deleteBubble()}),8e3),setInterval((()=>{this.game.decreaseFoodLife()}),800)}}document.addEventListener("DOMContentLoaded",(()=>{const s=document.getElementById("canvas"),t=s.getContext("2d");s.height=500,s.width=880;const e=document.querySelector(".burger"),i=document.querySelector(".exit"),h=document.querySelector(".navbar"),o=document.querySelector(".start"),a=document.querySelector(".titleScreen");e.addEventListener("mouseover",(function(){h.style.display="flex"})),o.addEventListener("click",(function(){a.style.display="none"})),i.addEventListener("click",(function(){h.style.display="none"})),new c(t).start()}))}()}();
//# sourceMappingURL=main.js.map